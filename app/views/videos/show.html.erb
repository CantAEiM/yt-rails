<div class="video-column">
  <%= video_tag url_for(@video.clip), poster: url_for(@video.thumbnail), :controls => true, class: "video-view" %>
  <div class="video-info">
    <h1 class="title"><%= truncate(@video.title, :length => 30, :separator => ' ') %></h1>
    <div class="video-meta">
      <span class="video-views">x views &middot; <%= @video.created_at.strftime("%b %d, %Y") %></span>
      <div class="video-meta-items">
        <%= link_to like_video_path(@video), method: :put, class: "video-meta-item", :onclick => "(document.getElementById('like-js').innerHTML = parseInt(document.getElementById('like-js').innerHTML) + 1)" do %>
          <i class='uil uil-thumbs-up'></i> <span id="like-js"><%= @video.get_upvotes.size %></span>
        <% end %>
        <%= link_to dislike_video_path(@video), method: :put, class: "video-meta-item" do %>
          <i class='uil uil-thumbs-down'></i> <%= @video.get_downvotes.size %>
        <% end %>
      </div>
    </div>
    <div class="video-description">
      <div class="video-uploader-meta">
        <%= link_to profile_path(@video.user) do %>
          <%= image_tag user_avatar(@video.user, 48), class: ['rounded-circle', 'fixed-profile-pic'], style: 'margin-right: 15px' %>
        <% end %>
        <div class="video-uploader-info">
          <%= link_to profile_path(@video.user), class: 'name' do %>
            <%= @video.user.username %>
          <% end %>
          <span class="subscriber-count">
            <%= @video.user.followers_count %> subscribers
          </span>
        </div>
        <% if user_signed_in? && current_user != @video.user %>
          <% if !current_user.follows?(@video.user)%>
            <%= link_to follow_profile_path(@video.user.id), class: 'subscribe-btn', method: :put do %>
              Subscribe
            <% end %>
          <% else %>
            <%= link_to unfollow_profile_path(@video.user.id), class: ['subscribe-btn', 'subscribe-btn--grey'], method: :put do %>
              Unsubscribe
            <% end %>
          <% end %>
        <% end %>
      </div>
      <p class="video-description-content"><%= @video.description %></p>
    </div>
  </div>
</div>
<div class="suggestions-column">
  <% @suggestions.each do |suggestion| %>
    <%= link_to suggestion, class: "suggestion-clickable" do %>
      <div class="suggestion-card">
        <div class="suggestion-thumbnail">
          <%= image_tag video_thumbnail(suggestion), class: "suggestion-image" %>
        </div>
        <div class="suggestion-meta">
          <span class="title"><%= truncate(suggestion.title, :length => 17, :separator => ' ') %></span>
          <span class="author"><%= suggestion.user.username %></span>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
